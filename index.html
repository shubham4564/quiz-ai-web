<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SH_Quiz</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon" id="theme-icon">üåô</span>
        <span id="theme-text">Dark Mode</span>
    </button>
    
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>üìù Quiz Maker</h1>
            <p style="margin: 0.5rem 0 0 0; opacity: 0.95;">Manage and Take Your Quizzes</p>
        </div>
        
        <div class="dashboard-content">
            <div class="mode-selector">
                <button class="mode-btn active" data-view="home">üè† Home</button>
                <button class="mode-btn" data-view="quiz">üìñ Take Quiz</button>
                <button class="mode-btn" data-view="admin">‚öôÔ∏è Admin Panel</button>
            </div>
            
            <!-- Home View -->
            <div id="home-view" class="view active">
                <!-- Collapsible Quick Guide -->
                <button id="toggle-quick-guide" class="btn-secondary" style="width:100%; margin:0 0 1rem 0;">
                    <span id="quick-guide-icon">üìò</span>
                    <span id="quick-guide-text">Show Quick Guide</span>
                </button>
                <div id="quick-guide-panel" class="instructions" style="display:none; margin-bottom:1.25rem;">
                    <h4>‚ÑπÔ∏è Quick Guide</h4>
                    <p><strong>For Quiz Takers:</strong></p>
                    <ul>
                        <li>Click "Take Quiz" to start.</li>
                        <li>Click on your chosen answer for instant feedback.</li>
                        <li>Use the "Next Question" button to proceed.</li>
                    </ul>
                    <p><strong>For Admins:</strong></p>
                    <ul>
                        <li>Click "Admin Panel" to manage questions.</li>
                        <li>Generate quizzes from PDFs or add them manually via JSON.</li>
                        <li>Use the provided example as a template.</li>
                    </ul>
                </div>
                <div class="action-card" data-view="quiz">
                    <h3>üìñ Take Quiz</h3>
                    <p>Start answering quiz questions and test your knowledge</p>
                </div>
                
                <div class="action-card" data-view="admin">
                    <h3>‚öôÔ∏è Admin Panel</h3>
                    <p>Add or update quiz questions in bulk using JSON format</p>
                </div>
                
                <div class="saved-quizzes-section" id="saved-quizzes-section">
                    <h4 style="margin-top:1.5rem; margin-bottom:0.75rem;">üíæ Saved Quizzes</h4>
                    <p class="saved-quizzes-hint" style="margin-top:0; font-size:0.8rem; color: var(--text-tertiary);">Quizzes generated from PDFs will appear here. Click to open or delete individually.</p>
                    <div id="saved-quizzes-list" class="saved-quizzes-list" style="display:flex; flex-direction:column; gap:0.5rem;"></div>
                    <div id="no-saved-quizzes" style="display:none; font-size:0.85rem; color: var(--text-secondary); background: var(--bg-tertiary); padding:0.75rem 1rem; border:1px dashed var(--border-color); border-radius:8px;">No saved quizzes yet. Generate one using the AI tab or add manually.</div>
                </div>

            </div>
            
            <!-- Quiz View -->
            <div id="quiz-view" class="view">
                <div id="quiz-container">
                    <!-- Quiz content will be dynamically loaded here -->
                </div>
            </div>
            
            <!-- Admin View (Password removed) -->
            <div id="admin-view" class="view">
                <div id="admin-content" class="admin-content" style="display: block;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                        <h2 style="color: var(--text-primary); margin: 0; font-weight: 600; font-size: 1.5rem;">Quiz Management</h2>
                        <button id="admin-back-to-home" class="btn-secondary">‚Üê Back to Home</button>
                    </div>

                    <!-- Tab Navigation -->
                    <div class="admin-tabs">
                        <button class="admin-tab-btn active" data-target="ai-section">ü§ñ AI Generation</button>
                        <button class="admin-tab-btn" data-target="manual-section">‚úçÔ∏è Manual Entry</button>
                    </div>

                    <!-- AI Generation Section -->
                    <div id="ai-section" class="admin-section active">
                        <h3 class="section-title">AI-Powered Quiz Generation</h3>
                        <p class="section-description">
                            Upload a PDF document and let AI generate quiz questions automatically.
                        </p>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="gemini-api-key">üîë Google Gemini API Key</label>
                                <input type="password" id="gemini-api-key" placeholder="Enter your Gemini API key">
                                <small>Get your key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                            </div>
                            
                            <div class="form-group">
                                <label for="pdf-upload">üìÑ Upload PDF Document</label>
                                <div id="drop-zone" class="drop-zone">
                                    <p>Drag & drop your PDF here, or click to select</p>
                                    <small>Max file size: 10MB</small>
                                    <input type="file" id="pdf-upload" accept=".pdf" style="display: none;">
                                </div>
                                <div id="file-name" style="text-align: center; margin-top: 0.5rem; font-weight: 500;"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="num-questions">Number of Questions to Generate</label>
                            <input type="number" id="num-questions" value="10" min="1" max="50">
                        </div>

                        <div id="ai-progress" style="display: none;" class="form-group">
                            <div class="progress-box">
                                <div class="loader"></div>
                                <span id="progress-text"></span>
                            </div>
                        </div>

                        <div id="ai-status-message" class="status-message" style="display: none;"></div>
                        
                        <button id="generate-btn" class="btn-primary">
                            ‚ú® Generate Quiz with AI
                        </button>
                    </div>
                    
                    <!-- Manual Entry Section -->
                    <div id="manual-section" class="admin-section">
                        <button id="toggle-instructions" class="btn-secondary" style="width: 100%; margin-bottom: 1rem;">
                            <span id="instructions-icon">üìñ</span>
                            <span id="instructions-text">Show Instructions</span>
                        </button>
                        
                        <div id="instructions-panel" class="instructions" style="display: none; margin-bottom: 1.5rem;">
                            <h4>üìã JSON Format Instructions</h4>
                            <p>Questions must be in the exact JSON format shown below.</p>
                            <ul>
                                <li>Array of question objects: <code>[{...}, {...}]</code></li>
                                <li>Each question needs: <code>"question"</code>, <code>"options"</code> (array of 4), <code>"hint"</code>.</li>
                                <li>Each option needs: <code>"text"</code>, <code>"correct"</code> (boolean, only one <code>true</code>), and <code>"explanation"</code>.</li>
                            </ul>
                            <pre>[
  {
    "question": "What is 2 + 2?",
    "hint": "Basic addition",
    "options": [
      {"text": "3", "correct": false, "explanation": "This is incorrect."},
      {"text": "4", "correct": true, "explanation": "This is the correct answer."},
      ...
    ]
  }
]</pre>
                        </div>
                        
                        <div class="form-group">
                            <label for="bulk-questions">Paste your JSON array below:</label>
                            <textarea id="bulk-questions" rows="12" placeholder="Paste JSON here..."></textarea>
                        </div>
                        
                        <div id="status-message" class="status-message" style="display: none;"></div>
                        
                        <button id="submit-questions" class="btn-primary">üíæ Save Questions</button>
                    </div>
                    
                    <div class="danger-zone">
                        <h4 class="section-title">‚ö†Ô∏è Danger Zone</h4>
                        <p class="section-description">These actions are permanent and cannot be undone.</p>
                        <button id="clear-quiz-btn" class="btn-danger">
                            üóëÔ∏è Clear All Quiz Data
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="dashboard.js"></script>
    <footer class="site-footer">
        Made by <strong>SHjoshi</strong>
    </footer>
</body>
</html>
