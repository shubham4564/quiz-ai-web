<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SH_Quiz</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon" id="theme-icon">üåô</span>
        <span id="theme-text">Dark Mode</span>
    </button>
    
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1>üìù Quiz Maker</h1>
            <p style="margin: 0.5rem 0 0 0; opacity: 0.95;">Manage and Take Your Quizzes</p>
        </div>
        
        <div class="dashboard-content">
            <div class="mode-selector">
                <button class="mode-btn active" data-view="home">üè† Home</button>
                <button class="mode-btn" data-view="quiz">üìñ Take Quiz</button>
                <button class="mode-btn" data-view="admin">‚öôÔ∏è Generate Your Quiz</button>
            </div>
            
            <!-- Home View -->
            <div id="home-view" class="view active">
                <!-- Collapsible Quick Guide -->
                <button id="toggle-quick-guide" class="btn-secondary" style="width:100%; margin:0 0 1rem 0;">
                    <span id="quick-guide-icon">üìò</span>
                    <span id="quick-guide-text">Show Quick Guide</span>
                </button>
                <div id="quick-guide-panel" class="instructions" style="display:none; margin-bottom:1.25rem;">
                    <h4>‚ÑπÔ∏è Quick Guide</h4>
                    <p><strong>For Quiz Takers:</strong></p>
                    <ul>
                        <li>Click "Take Quiz" to start.</li>
                        <li>Click on your chosen answer for instant feedback.</li>
                        <li>Use the "Next Question" button to proceed.</li>
                    </ul>
                    <p style="margin-top:0.75rem;"><strong>First Time Here?</strong></p>
                    <ul>
                        <li><strong>Start at "Generate Your Quiz"</strong> to create questions from a PDF or add them manually.</li>
                        <li>You can regenerate multiple distinct quiz sets from the same PDF.</li>
                        <li>Saved quizzes appear below for quick reuse.</li>
                    </ul>
                    <p><strong>Advanced (Manual JSON Entry):</strong></p>
                    <ul>
                        <li>Switch to Manual Entry tab inside the generator to paste custom JSON.</li>
                        <li>Use the inline example as a template; structure is strictly validated.</li>
                    </ul>
                </div>
                <div class="action-card" style="border:2px solid var(--accent-primary); background: var(--bg-tertiary);" data-view="admin">
                    <h3>üöÄ Start Here: Generate Your Quiz</h3>
                    <p>Create your first quiz by uploading a PDF or adding questions manually.</p>
                </div>
                <div class="action-card" data-view="quiz">
                    <h3>üìñ Take Quiz</h3>
                    <p>Start answering quiz questions and test your knowledge</p>
                </div>
                
                
                <div class="saved-quizzes-section" id="saved-quizzes-section">
                    <h4 style="margin-top:1.5rem; margin-bottom:0.75rem;">üíæ Saved Quizzes</h4>
                    <p class="saved-quizzes-hint" style="margin-top:0; font-size:0.8rem; color: var(--text-tertiary);">Quizzes generated from PDFs will appear here. Click to open or delete individually.</p>
                    <div id="saved-quizzes-list" class="saved-quizzes-list" style="display:flex; flex-direction:column; gap:0.5rem;"></div>
                    <div id="no-saved-quizzes" style="display:none; font-size:0.85rem; color: var(--text-secondary); background: var(--bg-tertiary); padding:0.75rem 1rem; border:1px dashed var(--border-color); border-radius:8px;">No saved quizzes yet. Generate one using the AI tab or add manually.</div>
                </div>

            </div>
            
            <!-- Quiz View -->
            <div id="quiz-view" class="view">
                <div id="quiz-container">
                    <!-- Quiz content will be dynamically loaded here -->
                </div>
            </div>
            
            <!-- Admin View (Password removed) -->
            <div id="admin-view" class="view">
                <div id="admin-content" class="admin-content" style="display: block;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color);">
                        <h2 style="color: var(--text-primary); margin: 0; font-weight: 600; font-size: 1.5rem;">Generate Your Quiz</h2>
                        <button id="admin-back-to-home" class="btn-secondary">‚Üê Back to Home</button>
                    </div>

                    <!-- Tab Navigation -->
                    <div class="admin-tabs">
                        <button class="admin-tab-btn active" data-target="ai-section">ü§ñ Generate from PDF (AI)</button>
                        <button class="admin-tab-btn" data-target="manual-section">‚úçÔ∏è Manual Entry (JSON)</button>
                    </div>

                    <!-- AI Generation Section -->
                    <div id="ai-section" class="admin-section active">
                        <h3 class="section-title">AI-Powered Quiz Generation</h3>
                        <p class="section-description">
                            Upload a PDF document and let AI generate quiz questions automatically.
                        </p>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="gemini-api-key">üîë Google Gemini API Key</label>
                                <input type="password" id="gemini-api-key" placeholder="Enter your Gemini API key">
                                <small>Get your key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                            </div>
                            
                            <div class="form-group">
                                <label for="pdf-upload">üìÑ Upload PDF Document</label>
                                <div id="drop-zone" class="drop-zone">
                                    <p>Drag & drop your PDF here, or click to select</p>
                                    <small>Max file size: 10MB</small>
                                    <input type="file" id="pdf-upload" accept=".pdf" style="display: none;">
                                </div>
                                <div id="file-name" style="text-align: center; margin-top: 0.5rem; font-weight: 500;"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="num-questions">Number of Questions to Generate</label>
                            <input type="number" id="num-questions" value="10" min="1" max="50">
                        </div>

                        <div id="ai-progress" style="display: none;" class="form-group">
                            <div class="progress-box">
                                <div class="loader"></div>
                                <span id="progress-text"></span>
                            </div>
                        </div>

                        <div id="ai-status-message" class="status-message" style="display: none;"></div>
                        
                        <button id="generate-btn" class="btn-primary">
                            ‚ú® Generate Quiz with AI
                        </button>
                    </div>
                    
                    <!-- Manual Entry Section -->
                    <div id="manual-section" class="admin-section">
                        <button id="toggle-instructions" class="btn-secondary" style="width: 100%; margin-bottom: 1rem;">
                            <span id="instructions-icon">üìñ</span>
                            <span id="instructions-text">Show Instructions</span>
                        </button>
                        
                                                <div id="instructions-panel" class="instructions" style="display: none; margin-bottom: 1.5rem;">
                                                        <h4>üìã JSON Manual Entry Guide</h4>
                                                        <p>Paste a JSON <strong>array</strong> of question objects. The app validates structure before saving. No partial saves on error.</p>
                                                        <ul style="margin-top:0.75rem;">
                                                                <li><strong>Top Level:</strong> Must be <code>[ ... ]</code> (an array). No trailing commas.</li>
                                                                <li><strong>Each Object Fields:</strong> <code>question</code> (string), <code>hint</code> (string, optional but recommended), <code>options</code> (array length = 4).</li>
                                                                <li><strong>Each Option:</strong> <code>text</code> (string), <code>correct</code> (boolean), <code>explanation</code> (string).</li>
                                                                <li><strong>Exactly 1</strong> option per question must have <code>"correct": true</code>.</li>
                                                                <li>Keep explanations concise; they appear after answering.</li>
                                                                <li>No extra fields are required; additional custom fields will be ignored.</li>
                                                        </ul>
                                                        <p style="margin-top:0.75rem; font-weight:600;">‚úÖ Full Working Example (copy & modify):</p>
                                                        <pre>[
    {
        "question": "Which protocol operates at the Transport Layer and provides unreliable, connectionless service?",
        "hint": "Think lightweight and no handshake.",
        "options": [
            { "text": "TCP", "correct": false, "explanation": "TCP is connection-oriented and reliable." },
            { "text": "UDP", "correct": true, "explanation": "UDP is connectionless and does not guarantee delivery." },
            { "text": "SMTP", "correct": false, "explanation": "SMTP is an application layer email protocol." },
            { "text": "IPSec", "correct": false, "explanation": "IPSec secures IP traffic; it's not the transport protocol described." }
        ]
    },
    {
        "question": "What is the PRIMARY benefit of using hashing when storing user passwords?",
        "hint": "Mitigates impact of database disclosure.",
        "options": [
            { "text": "It allows instant password recovery", "correct": false, "explanation": "Hashes are one-way; you can't recover the original password." },
            { "text": "It prevents users from choosing weak passwords", "correct": false, "explanation": "Hashing doesn't enforce password strength; policies do." },
            { "text": "It protects original passwords if the DB is leaked", "correct": true, "explanation": "Proper hashing (with salt) makes reversing difficult." },
            { "text": "It speeds up login performance", "correct": false, "explanation": "Hashing adds computation; performance is not the main goal." }
        ]
    },
    {
        "question": "In symmetric encryption, what is a major operational challenge?",
        "hint": "Consider key lifecycle.",
        "options": [
            { "text": "Slow performance at scale", "correct": false, "explanation": "Symmetric ciphers are generally fast." },
            { "text": "Key distribution to all parties", "correct": true, "explanation": "Securely sharing the same secret key is difficult." },
            { "text": "Inability to encrypt large data", "correct": false, "explanation": "Symmetric encryption handles large data efficiently." },
            { "text": "Mathematical insecurity of algorithms", "correct": false, "explanation": "Modern ciphers (AES) are considered strong when used properly." }
        ]
    }
]</pre>
                                                        <p style="margin-top:0.75rem; font-size:0.85rem; color: var(--text-secondary);">Tip: Validate your JSON with any online linter if you hit errors. Common mistakes: missing commas, trailing commas, or using single quotes instead of double quotes.</p>
                                                </div>
                        
                        <div class="form-group">
                            <label for="bulk-questions">Paste your JSON array below:</label>
                            <textarea id="bulk-questions" rows="12" placeholder="Paste JSON here..."></textarea>
                        </div>
                        
                        <div id="status-message" class="status-message" style="display: none;"></div>
                        
                        <button id="submit-questions" class="btn-primary">üíæ Save Questions</button>
                    </div>
                    
                    <div class="danger-zone">
                        <h4 class="section-title">‚ö†Ô∏è Danger Zone</h4>
                        <p class="section-description">These actions are permanent and cannot be undone.</p>
                        <button id="clear-quiz-btn" class="btn-danger">
                            üóëÔ∏è Clear All Quiz Data
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="dashboard.js"></script>
    <footer class="site-footer">
        Made by <strong>SHjoshi</strong>
    </footer>
</body>
</html>
